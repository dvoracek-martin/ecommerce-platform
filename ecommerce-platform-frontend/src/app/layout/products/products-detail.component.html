<div class="product-detail-wrapper">
  <!-- Main content container -->
  <div class="product-detail-container">
    <mat-card class="product-card">
      <!-- Header -->
      <div class="admin-header-section" *ngIf="product">
        <div class="admin-header-content">
          <div class="admin-title-section">
            <h1>{{ product.name | translate }}</h1>
            <p class="admin-subtitle">{{ 'PRODUCTS.ADMIN_SUBTITLE.CREATE' | translate }}</p>
          </div>
        </div>
      </div>


      <mat-divider></mat-divider>

      <!-- Loading state -->
      <div *ngIf="loading" class="loading-section">
        <mat-progress-bar mode="indeterminate"></mat-progress-bar>
        <div class="loading-text">Loading product details...</div>
      </div>

      <!-- Error state -->
      <div *ngIf="error" class="error-section">
        <mat-icon class="error-icon" color="warn">error_outline</mat-icon>
        <div class="error-text">{{ error }}</div>
        <button (click)="backToList()" color="warn" mat-stroked-button>
          <mat-icon>arrow_back</mat-icon>
          Back to Products
        </button>
      </div>

      <!-- Product details with floating image -->
      <div *ngIf="product" class="form-one-column-wrapper">
        <div class="row">
          <!-- Floated image (first image) -->
          <div class="float-image right" *ngIf="product.media?.length">
            <img
              [alt]="product.name"
              [src]="'data:' + product.media[0].contentType + ';base64,' + product.media[0].base64Data"
            />
          </div>

          <!-- Text content wrapping around image -->
          <div class="text-content">
            <!-- Description -->
            <div *ngIf="product.description">
              <h3>
                <mat-icon>description</mat-icon>
                Description
              </h3>
              <p>{{ product.description }}</p>
            </div>

            <mat-divider></mat-divider>

            <!-- Product Details -->
            <div *ngIf="product.weightGrams" class="card-details">
              <h3>
                <mat-icon>info</mat-icon>
                Product Details
              </h3>
              <div class="detail-row">
                <span class="detail-label">Weight:</span>
                <span class="detail-value">{{ product.weightGrams }} g</span>
              </div>
            </div>

            <mat-divider></mat-divider>

            <!-- Tags Section -->
            <div *ngIf="product.responseTagDTOS?.length" class="card-details">
              <h3>
                <mat-icon>label</mat-icon>
                Tags
              </h3>
              <div *ngIf="product.responseTagDTOS?.length">
                <div class="tags-container">
                  <span *ngFor="let tag of product.responseTagDTOS" class="tag">
                    {{ tag.name }}
                  </span>
                </div>
              </div>
            </div>

            <mat-divider></mat-divider>
          </div>
        </div>
      </div>

      <!-- Back button at bottom -->
      <div *ngIf="product" class="actions-section">
        <button (click)="backToList()" mat-stroked-button>
          <mat-icon>arrow_back</mat-icon>
          Back to Products
        </button>
      </div>
    </mat-card>
  </div>

  <!-- Floating Purchase Box (right) -->
  <div class="floating-purchase-box" *ngIf="product">
    <button (click)="addToCart()" class="btn btn-primary">
      <mat-icon>add_shopping_cart</mat-icon>
      Add to Cart
    </button>
    <div class="price" *ngIf="product.price">
      {{ product.price | currency }}
    </div>
  </div>
</div>
