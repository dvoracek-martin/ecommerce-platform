<div class="product-detail-container">
  <mat-card class="product-card">
    <mat-card-header *ngIf="product">
      <mat-card-title class="product-title">
        <mat-icon class="title-icon">inventory_2</mat-icon>
        {{ product.name }}
      </mat-card-title>
    </mat-card-header>

    <mat-divider></mat-divider>

    <div *ngIf="loading" class="loading-section">
      <mat-progress-bar mode="indeterminate"></mat-progress-bar>
      <div class="loading-text">Loading product details...</div>
    </div>

    <div *ngIf="error" class="error-section">
      <mat-icon class="error-icon" color="warn">error_outline</mat-icon>
      <div class="error-text">{{ error }}</div>
      <button (click)="backToList()" color="warn" mat-stroked-button>
        <mat-icon>arrow_back</mat-icon>
        Back to Products
      </button>
    </div>

    <div *ngIf="product" class="product-content">
      <div class="product-main">
        <!-- Product Images -->
        <div *ngIf="product.media?.length" class="images-section">
          <div class="images-grid">
            <div *ngFor="let media of product.media" class="image-container">
              <img
                [alt]="product.name"
                [src]="'data:' + media.contentType + ';base64,' + media.base64Data"
                class="product-image"
              />
            </div>
          </div>
        </div>

        <!-- Product Details -->
        <div class="details-section">
          <!-- Price and Add to Cart -->
          <div class="price-cart-row">
            <div *ngIf="product.price" class="price">
              {{ product.price | currency }}
            </div>
            <button (click)="addToCart()" class="add-to-cart-btn" color="primary" mat-flat-button>
              <mat-icon>add_shopping_cart</mat-icon>
              Add to Cart
            </button>
          </div>

          <!-- Description -->
          <div *ngIf="product.description" class="description-section">
            <h3 class="section-subtitle">
              <mat-icon>description</mat-icon>
              Description
            </h3>
            <p class="description">{{ product.description }}</p>
          </div>

          <!-- Product Details -->
          <div class="info-section">
            <h3 class="section-subtitle">
              <mat-icon>info</mat-icon>
              Product Details
            </h3>

            <div *ngIf="product.weightGrams" class="detail-row">
              <span class="detail-label">Weight:</span>
              <span class="detail-value">{{ product.weightGrams }} g</span>
            </div>
          </div>

          <!-- Tags Section -->
          <div *ngIf="product.responseTagDTOS?.length" class="tags-section">
            <h3 class="section-subtitle">
              <mat-icon>label</mat-icon>
              Tags
            </h3>
            <div class="tags-container">
              <mat-chip-set>
                <mat-chip
                  *ngFor="let tag of product.responseTagDTOS"
                  class="tag-chip"
                  color="primary"
                >
                  {{ tag.name }}
                </mat-chip>
              </mat-chip-set>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div *ngIf="product" class="actions-section">
      <button (click)="backToList()" mat-stroked-button>
        <mat-icon>arrow_back</mat-icon>
        Back to Products
      </button>
    </div>
  </mat-card>
</div>
