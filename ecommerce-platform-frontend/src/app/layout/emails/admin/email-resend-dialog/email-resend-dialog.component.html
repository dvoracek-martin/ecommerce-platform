<div class="modern-dialog-container">
  <div class="modern-dialog-header">
    <h2 class="dialog-title">
      <mat-icon>email</mat-icon>
      {{ isViewMode() ? 'View Email Details' : 'Resend Email' }}
    </h2>
  </div>

  <div class="modern-dialog-body">
    <div class="email-info">
      <div class="info-row">
        <span class="label">Recipient:</span>
        <span class="value">{{ data.emailLog.recipient }}</span>
      </div>
      <div class="info-row">
        <span class="label">Email Type:</span>
        <span class="value">{{ data.emailLog.emailType }}</span>
      </div>
      <div class="info-row">
        <span class="label">Original Language:</span>
        <span class="value">{{ getOriginalLanguage() }}</span>
      </div>
      <div class="info-row">
        <span class="label">Sent At:</span>
        <span class="value">{{ data.emailLog.sentAt | date:'medium' }}</span>
      </div>
    </div>

    <div class="form-section">
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Language</mat-label>
        <mat-select [formControl]="languageControl">
          <mat-option *ngFor="let lang of availableLanguages" [value]="lang">
            {{ getLanguageDisplayName(lang) }}
          </mat-option>
        </mat-select>
        <mat-icon matSuffix>language</mat-icon>
        <mat-hint *ngIf="!isViewMode()">Select the language for the resent email</mat-hint>
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Subject</mat-label>
        <input matInput [formControl]="subjectControl" maxlength="200">
        <mat-hint align="end">{{ subject.length }}/200</mat-hint>
        <mat-error *ngIf="subjectControl.hasError('required')">
          Subject is required
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width email-body">
        <mat-label>Body</mat-label>
        <textarea
          matInput
          [formControl]="bodyControl"
          rows="8"
          maxlength="5000">
        </textarea>
        <mat-hint align="end">{{ body.length }}/5000</mat-hint>
        <mat-error *ngIf="bodyControl.hasError('required')">
          Body is required
        </mat-error>
      </mat-form-field>
    </div>
  </div>

  <div class="modern-dialog-actions">
    <button mat-stroked-button (click)="close()" type="button">
      <mat-icon>close</mat-icon>
      {{ isViewMode() ? 'Close' : 'Cancel' }}
    </button>
    <button
      *ngIf="!isViewMode()"
      mat-flat-button
      color="primary"
      (click)="resendEmail()"
      [disabled]="!canResend()">
      <mat-icon>send</mat-icon>
      Resend Email
    </button>
  </div>
</div>
